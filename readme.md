# 项目概览

## 硬件部分

1.  **RISC-V五段流水线CPU**：实现了*取指-译码-执行-访存-回写*的流水线CPU，包含转发与阻塞探查处理，常见数据冒险无冲刷，load-use指令插入一次气泡。

2.  **中断与CSR寄存器支持**：实现了流水线的中断，支持机器态、非向量、无嵌套的中断处理。添加CSR寄存器及CSR读写指令（csrrc、csrrw等6条），添加ecall、mret指令。实现时钟中断。

3.  **板载硬件支持与显示器拓展**：支持内核写入板上6个七段数码管与10个LEDR，支持VGA字符的最高256色显示

4.  **内存映射与IO调度**：利用内存映射实现代码区、数据区、显存、键盘数据、中断临时栈等无冲突读写

## 软件部分

1.  **内核编写**：使用C语言编写内核，提供了输入输出接口、常见std函数（strtok、atoi、strcmp、itoa）、软件乘除法，兼具易用性与可拓展性。实现几条要求的基础指令。

2.  **中断注册与处理**：使用汇编语言编写中断处理入口函数、完成状态保存与上下文切换，C语言使用内联汇编方式编写中断注册与实际处理函数，实现了时钟中断处理。

3.  **移植表达式求值、实现跑马灯功能**：移植了PA的表达式求值，可以实现常见的表达式求值。利用板载硬件的内存映射完成类似开发板开机时的跑马灯功能。

4.  **字符动画**：基于之前写的字符动画脚本实现了字符动画。利用字符串压缩算法大幅减小存储占用，压缩率9%，使用128KB内存可以播放约30s。

## 其他

1.  **编写调试辅助脚本**：编写了一个python脚本，可以交互式地将16进制Riscv指令转换为汇编，方便调试

# 实现细节

参见`report/`
